{% extends 'base.html' %}

{% block title %}æˆ‘çš„æ”»ç•¥ - é‡å­å¤ªç©ºæ€æ”»ç•¥ç«™{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>ğŸ“š æˆ‘çš„æ”»ç•¥</h1>
        <p class="subtitle">ç®¡ç†ä½ å‘å¸ƒçš„æ‰€æœ‰æ”»ç•¥</p>
    </div>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats-section">
        <div class="stats-card">
            <div class="stats-number">{{ page_obj.paginator.count }}</div>
            <div class="stats-label">æ€»æ”»ç•¥æ•°</div>
        </div>
        <div class="stats-card">
            <div class="stats-number">{{ user.date_joined|date:"Y-m-d" }}</div>
            <div class="stats-label">åŠ å…¥æ—¶é—´</div>
        </div>
    </div>

    <!-- æ“ä½œæŒ‰é’® -->
    <div class="action-buttons">
        <a href="{% url 'guides:add_guide' %}" class="btn btn-primary">
            <i class="icon-plus"></i> å‘å¸ƒæ–°æ”»ç•¥
        </a>
        <a href="{% url 'guides:home' %}" class="btn btn-secondary">
            <i class="icon-home"></i> è¿”å›é¦–é¡µ
        </a>
    </div>

    <!-- æ”»ç•¥åˆ—è¡¨ -->
    {% if page_obj.object_list %}
        <div class="guides-grid">
            {% for guide in page_obj.object_list %}
                <div class="guide-card">
                    <div class="guide-header">
                        <h3 class="guide-title">
                            <a href="{% url 'guides:guide_detail' guide.pk %}">{{ guide.title }}</a>
                        </h3>
                        <div class="guide-meta">
                            <span class="guide-date">{{ guide.created_at|date:"Y-m-d H:i" }}</span>
                            <span class="guide-views">ğŸ‘ {{ guide.views }}</span>
                        </div>
                    </div>
                    
                    <div class="guide-content-preview">
                        {{ guide.content|truncatewords:30 }}
                    </div>
                    
                    <div class="guide-tags">
                        {% for tag in guide.get_tags_list %}
                            <span class="tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    
                    <div class="guide-actions">
                        <a href="{% url 'guides:guide_detail' guide.pk %}" class="btn btn-small">
                            <i class="icon-eye"></i> æŸ¥çœ‹
                        </a>
                        <a href="#" class="btn btn-small btn-warning">
                            <i class="icon-edit"></i> ç¼–è¾‘
                        </a>
                        <form method="post" action="{% url 'guides:delete_guide' guide.pk %}" style="display: inline;" 
                              onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤æ”»ç•¥ã€Š{{ guide.title }}ã€‹å—ï¼Ÿ')">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-small btn-danger">
                                <i class="icon-trash"></i> åˆ é™¤
                            </button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>

        <!-- åˆ†é¡µ -->
        {% if page_obj.has_other_pages %}
            <div class="pagination">
                {% if page_obj.has_previous %}
                    <a href="?page=1" class="page-link">é¦–é¡µ</a>
                    <a href="?page={{ page_obj.previous_page_number }}" class="page-link">ä¸Šä¸€é¡µ</a>
                {% endif %}

                <span class="current-page">
                    ç¬¬ {{ page_obj.number }} é¡µ / å…± {{ page_obj.paginator.num_pages }} é¡µ
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" class="page-link">ä¸‹ä¸€é¡µ</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}" class="page-link">æœ«é¡µ</a>
                {% endif %}
            </div>
        {% endif %}
    {% else %}
        <div class="empty-state">
            <div class="empty-icon">ğŸ“š</div>
            <h3>è¿˜æ²¡æœ‰å‘å¸ƒæ”»ç•¥</h3>
            <p>åˆ†äº«ä½ çš„é‡å­å¤ªç©ºæ€æˆ˜æœ¯ï¼Œå¸®åŠ©å…¶ä»–ç©å®¶æå‡æŠ€èƒ½ï¼</p>
            <a href="{% url 'guides:add_guide' %}" class="btn btn-primary">
                <i class="icon-plus"></i> å‘å¸ƒç¬¬ä¸€ä¸ªæ”»ç•¥
            </a>
        </div>
    {% endif %}
</div>

<style>
/* æ ·å¼ä»£ç çœç•¥ï¼Œè¯¦è§å®Œæ•´æ–‡ä»¶ */
</style>
{% endblock %}